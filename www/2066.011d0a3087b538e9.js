"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2066],{2066:(j,N,d)=>{d.d(N,{_:()=>Z});var b=d(467),P=d(4412),m=d(3953),S=d(1635),T=d(1985),C=d(3726),F={error:"cordova_not_available"},q={error:"plugin_not_installed"};function w(n){if(typeof window<"u"&&window.angular){var r=window.document,t=window.angular.element(r.querySelector("[ng-app]")||r.body).injector();if(t)return t.get("$q")(function(a,o){n(a,o)});console.warn("Angular 1 was detected but $q couldn't be retrieved. This is usually when the app is not bootstrapped on the html or body tag. Falling back to native promises which won't trigger an automatic digest when promises resolve.")}return function(){if(Promise)return new Promise(function(a,o){n(a,o)});console.error("No Promise support or polyfill found. To enable Ionic Native support, please add the es6-promise polyfill before this script, or run with a library like Angular or on a recent browser.")}()}function p(n,e,r){var t,i;"string"==typeof n?t=n:(t=n.constructor.getPluginRef(),r=n.constructor.getPluginName(),i=n.constructor.getPluginInstallName());var a=A(t);return!(!a||e&&typeof a[e]>"u")||(typeof window>"u"||!window.cordova?(function M(n,e){typeof process>"u"&&console.warn(e?"Native: tried calling "+n+"."+e+", but Cordova is not available. Make sure to include cordova.js or run in a device/simulator":"Native: tried accessing the "+n+" plugin but Cordova is not available. Make sure to include cordova.js or run in a device/simulator")}(r,e),F):(function K(n,e,r){console.warn(r?"Native: tried calling "+n+"."+r+", but the "+n+" plugin is not installed.":"Native: tried accessing the "+n+" plugin but it's not installed."),e&&console.warn("Install the "+n+" plugin: 'ionic cordova plugin add "+e+"'")}(r,i,e),q))}function R(n,e,r,t){if(void 0===e&&(e={}),e.sync)return n;if("reverse"===e.callbackOrder)n.unshift(t),n.unshift(r);else if("node"===e.callbackStyle)n.push(function(l,c){l?t(l):r(c)});else if("object"===e.callbackStyle&&e.successName&&e.errorName){var i={};i[e.successName]=r,i[e.errorName]=t,n.push(i)}else if(typeof e.successIndex<"u"||typeof e.errorIndex<"u"){var a=function(){e.successIndex>n.length?n[e.successIndex]=r:n.splice(e.successIndex,0,r)},o=function(){e.errorIndex>n.length?n[e.errorIndex]=t:n.splice(e.errorIndex,0,t)};e.successIndex>e.errorIndex?(o(),a()):(a(),o())}else n.push(r),n.push(t);return n}function y(n,e,r,t,i,a){void 0===t&&(t={}),r=R(r,t,i,a);var o=p(n,e);if(!0===o){var l=A(n.constructor.getPluginRef());return l[e].apply(l,r)}return o}function v(n,e,r,t,i,a){if(void 0===t&&(t={}),r=R(r,t,i,a),function H(n,e){return n._objectInstance&&(!e||typeof n._objectInstance[e]<"u")}(n,e))return n._objectInstance[e].apply(n._objectInstance,r)}function A(n){return typeof window<"u"?x(window,n):null}function x(n,e){for(var r=e.split("."),t=n,i=0;i<r.length;i++){if(!t)return null;t=t[r[i]]}return t}var $=function(){function n(){}return n.installed=function(){return!0===p(this.pluginRef)},n.getPlugin=function(){return typeof window<"u"?function W(n,e){for(var r=e.split("."),t=n,i=0;i<r.length;i++){if(!t)return null;t=t[r[i]]}return t}(window,this.pluginRef):null},n.getPluginName=function(){return this.pluginName},n.getPluginRef=function(){return this.pluginRef},n.getPluginInstallName=function(){return this.plugin},n.getSupportedPlatforms=function(){return this.platforms},n.pluginName="",n.pluginRef="",n.plugin="",n.repo="",n.platforms=[],n.install="",n}();function I(n,e,r,t){return function(n,e,r){return void 0===r&&(r={}),function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return r.sync?y(n,e,t,r):r.observable?function V(n,e,r,t){return void 0===t&&(t={}),new T.c(function(i){var a;return a=t.destruct?y(n,e,r,t,function(){for(var o=[],l=0;l<arguments.length;l++)o[l]=arguments[l];return i.next(o)},function(){for(var o=[],l=0;l<arguments.length;l++)o[l]=arguments[l];return i.error(o)}):y(n,e,r,t,i.next.bind(i),i.error.bind(i)),a&&a.error&&(i.error(a.error),i.complete()),function(){try{if(t.clearFunction)return t.clearWithArgs?y(n,t.clearFunction,r,t,i.next.bind(i),i.error.bind(i)):y(n,t.clearFunction,[])}catch(o){console.warn("Unable to clear the previous observable watch for",n.constructor.getPluginName(),e),console.warn(o)}}})}(n,e,t,r):r.eventObservable&&r.event?function G(n,e){return e=typeof window<"u"&&e?x(window,e):e||(typeof window<"u"?window:{}),(0,C.R)(e,n)}(r.event,r.element):r.otherPromise?function U(n,e,r,t){return void 0===t&&(t={}),w(function(i,a){var o=y(n,e,r,t);o?o.error?a(o.error):o.then&&o.then(i).catch(a):a({error:"unexpected_error"})})}(n,e,t,r):function k(n,e,r,t){void 0===t&&(t={});var i,a,o=w(function(l,c){i=t.destruct?y(n,e,r,t,function(){for(var f=[],u=0;u<arguments.length;u++)f[u]=arguments[u];return l(f)},function(){for(var f=[],u=0;u<arguments.length;u++)f[u]=arguments[u];return c(f)}):y(n,e,r,t,l,c),a=c});return i&&i.error&&(o.catch(function(){}),"function"==typeof a&&a(i.error)),o}(n,e,t,r)}}(n,e,r).apply(this,t)}function g(n,e,r,t){return t=Array.from(t),function Q(n,e,r){return void 0===r&&(r={}),function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];if(r.sync)return v(n,e,t,r);if(r.observable)return new T.c(function(c){var f;return f=r.destruct?v(n,e,t,r,function(){for(var u=[],s=0;s<arguments.length;s++)u[s]=arguments[s];return c.next(u)},function(){for(var u=[],s=0;s<arguments.length;s++)u[s]=arguments[s];return c.error(u)}):v(n,e,t,r,c.next.bind(c),c.error.bind(c)),f&&f.error&&c.error(f.error),function(){try{return r.clearWithArgs?v(n,r.clearFunction,t,r,c.next.bind(c),c.error.bind(c)):v(n,r.clearFunction,[])}catch(u){console.warn("Unable to clear the previous observable watch for",n.constructor.getPluginName(),e),console.warn(u)}}});if(r.otherPromise)return w(function(c,f){var u;u=r.destruct?v(n,e,t,r,function(){for(var s=[],h=0;h<arguments.length;h++)s[h]=arguments[h];return c(s)},function(){for(var s=[],h=0;h<arguments.length;h++)s[h]=arguments[h];return f(s)}):v(n,e,t,r,c,f),u&&u.then?u.then(c,f):f()});var a,o,l=w(function(c,f){a=r.destruct?v(n,e,t,r,function(){for(var u=[],s=0;s<arguments.length;s++)u[s]=arguments[s];return c(u)},function(){for(var u=[],s=0;s<arguments.length;s++)u[s]=arguments[s];return f(u)}):v(n,e,t,r,c,f),o=f});return a&&a.error&&(l.catch(function(){}),"function"==typeof o&&o(a.error)),l}}(n,e,r).apply(this,t)}function E(n,e){return n._objectInstance&&n._objectInstance[e]?n._objectInstance[e]:null}function D(n,e,r){n._objectInstance&&(n._objectInstance[e]=r)}!function B(){if(typeof process>"u"){var n=typeof window<"u"?window:{},r=Date.now(),t=!1;n.document.addEventListener("deviceready",function(){console.log("Ionic Native: deviceready event fired after "+(Date.now()-r)+" ms"),t=!0}),setTimeout(function(){!t&&n.cordova&&console.warn("Ionic Native: deviceready did not fire within 5000ms. This can happen when plugins are in an inconsistent state. Try removing plugins from plugins/ and reinstalling them.")},5e3)}}();var X=function(){function n(e){this._objectInstance=e}return n.prototype.addTransaction=function(e){return g(this,"addTransaction",{sync:!0},arguments)},n.prototype.transaction=function(e){return g(this,"transaction",{successIndex:2,errorIndex:1},arguments)},n.prototype.readTransaction=function(e){return g(this,"readTransaction",{},arguments)},n.prototype.startNextTransaction=function(){return g(this,"startNextTransaction",{sync:!0},arguments)},n.prototype.open=function(){return g(this,"open",{},arguments)},n.prototype.close=function(){return g(this,"close",{},arguments)},n.prototype.executeSql=function(e,r){return g(this,"executeSql",{},arguments)},n.prototype.sqlBatch=function(e){return g(this,"sqlBatch",{},arguments)},n.prototype.abortallPendingTransactions=function(){return g(this,"abortallPendingTransactions",{sync:!0},arguments)},Object.defineProperty(n.prototype,"databaseFeatures",{get:function(){return E(this,"databaseFeatures")},set:function(e){D(this,"databaseFeatures",e)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"openDBs",{get:function(){return E(this,"openDBs")},set:function(e){D(this,"openDBs",e)},enumerable:!1,configurable:!0}),n}(),Y=function(n){function e(){return null!==n&&n.apply(this,arguments)||this}return(0,S.C6)(e,n),e.prototype.create=function(r){var t=this;return function(){if(!0===p(t))return new Promise(function(i,a){sqlitePlugin.openDatabase(r,function(o){return i(new X(o))},a)})}()},e.prototype.echoTest=function(){return I(this,"echoTest",{},arguments)},e.prototype.selfTest=function(){return I(this,"selfTest",{},arguments)},e.prototype.deleteDatabase=function(r){return I(this,"deleteDatabase",{},arguments)},e.\u0275fac=(()=>{let r;return function(i){return(r||(r=m.xGo(e)))(i||e)}})(),e.\u0275prov=m.jDH({token:e,factory:e.\u0275fac}),e.pluginName="SQLite",e.pluginRef="sqlitePlugin",e.plugin="cordova-sqlite-storage",e.repo="https://github.com/litehelpers/Cordova-sqlite-storage",e.platforms=["Android","iOS","macOS","Windows"],e=(0,S.Cg)([],e)}($),J=d(3656),L=d(5150);let Z=(()=>{var n;class e{constructor(t,i,a,o){this.sqlite=t,this.platform=i,this.toastController=a,this.alertController=o,this.tablaIngrediente="CREATE TABLE IF NOT EXISTS ingrediente(id_ingrediente INTEGER PRIMARY KEY autoincrement, nombre VARCHAR(20) NOT NULL, cantidad NUMBER NOT NULL, unidad_med VARCHAR(10) NOT NULL);",this.registroIngrediente="INSERT or IGNORE INTO ingrediente(id_ingrediente, nombre, cantidad, unidad_med) VALUES (1, 'Harina', 2, 'taza');",this.listaIngredientes=new P.t([]),this.isDBReady=new P.t(!1),this.crearBD()}presentToast(t){var i=this;return(0,b.A)(function*(){yield(yield i.toastController.create({message:t,duration:3e3,icon:"globe"})).present()})()}presetAlert(t){var i=this;return(0,b.A)(function*(){yield(yield i.alertController.create({header:"Alert",message:t,buttons:["OK"]})).present()})()}crearBD(){this.platform.ready().then(()=>{this.sqlite.create({name:"bdingredientes.db",location:"default"}).then(t=>{this.database=t,this.crearTablas()}).catch(t=>{this.presentToast("Error BD:"+t)})})}crearTablas(){var t=this;return(0,b.A)(function*(){try{yield t.database.executeSql(t.tablaIngrediente,[]),yield t.database.executeSql(t.registroIngrediente,[]),t.buscarIngredientes(),t.isDBReady.next(!0)}catch(i){t.presentToast("Error Tablas: "+i)}})()}buscarIngredientes(){return this.database.executeSql("SELECT * FROM ingrediente",[]).then(t=>{let i=[];if(t.rows.length>0)for(var a=0;a<t.rows.length;a++)i.push({id:t.rows.item(a).id_ingrediente,nombre:t.rows.item(a).nombre,cantidad:t.rows.item(a).cantidad,unidad_med:t.rows.item(a).unidad_med});this.listaIngredientes.next(i)})}dbState(){return this.isDBReady.asObservable()}fetchIngredientes(){return this.listaIngredientes.asObservable()}insertarIngredientes(t,i,a){return this.database.executeSql("INSERT INTO ingrediente(nombre, cantidad, unidad_med) VALUES (?,?,?)",[t,i,a]).then(l=>{this.buscarIngredientes()})}modificarIngredientes(t,i,a,o){return this.database.executeSql("UPDATE ingrediente SET nombre = ?, cantidad = ?, unidad_med = ? WHERE id_ingrediente = ?",[i,a,o,t]).then(c=>{this.buscarIngredientes()})}eliminarIngredientes(t){return this.database.executeSql("DELETE FROM ingrediente WHERE id_ingrediente = ?",[t]).then(i=>{this.buscarIngredientes()})}}return(n=e).\u0275fac=function(t){return new(t||n)(m.KVO(Y),m.KVO(J.OD),m.KVO(L.K_),m.KVO(L.hG))},n.\u0275prov=m.jDH({token:n,factory:n.\u0275fac,providedIn:"root"}),e})()}}]);